import{T as E}from"./index.3f34d0c0.js";import{q as _,d as w,L as A,k as c,_ as v,r as n,o as f,x as h,w as r,b as a,j as C,v as P,A as V,c as $,a as y,y as B,B as T,f as b,t as D}from"./index.79adc836.js";import{f as U}from"./date.df283880.js";import{P as k,S,D as L}from"./Search.d0043b8e.js";function H(){return _({url:"/sshinfo/list",method:"get"})}function N(e){return _({url:"/sshinfo/add",method:"post",data:e})}function q(e){return _({url:"/sshinfo/update",method:"post",data:e})}const G=w({components:{Layer:A},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},setup(e,t){const l=c(null),i=c(null);let d=c({Host:"",Port:"",Username:"",Passwd:"",ID:""});const m={Host:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E3B\u673AIP",trigger:"blur"}],Port:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E3B\u673Aport",trigger:"blur"}],Username:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u6237",trigger:"blur"}],Passwd:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801",trigger:"blur"}]};u();function u(){e.layer.row&&(d.value=JSON.parse(JSON.stringify(e.layer.row)))}return{form:d,rules:m,layerDom:i,ruleForm:l}},methods:{submit(){this.ruleForm&&this.ruleForm.validate(e=>{if(e){let t=this.form;this.layer.row?this.updateForm(t):this.addForm(t)}else return!1})},addForm(e){N(e).then(t=>{this.$message({type:"success",message:"\u65B0\u589E\u6210\u529F"}),this.$emit("getTableData",!0),this.layerDom&&this.layerDom.close()})},updateForm(e){q(e).then(t=>{this.$message({type:"success",message:"\u7F16\u8F91\u6210\u529F"}),this.$emit("getTableData"),this.layerDom&&this.layerDom.close()})}}});function I(e,t,l,i,d,m){const u=n("el-input"),o=n("el-form-item"),F=n("el-form"),g=n("Layer",!0);return f(),h(g,{layer:e.layer,onConfirm:e.submit,ref:"layerDom"},{default:r(()=>[a(F,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:r(()=>[a(o,{label:"\u4E3B\u673AIP: ",prop:"Host"},{default:r(()=>[a(u,{modelValue:e.form.Host,"onUpdate:modelValue":t[0]||(t[0]=s=>e.form.Host=s),placeholder:"\u8BF7\u8F93\u5165IP"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u4E3B\u673Aport: ",prop:"Port"},{default:r(()=>[a(u,{modelValue:e.form.Port,"onUpdate:modelValue":t[1]||(t[1]=s=>e.form.Port=s),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u7AEF\u53E3"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u767B\u5F55\u8D26\u6237\uFF1A",prop:"Username"},{default:r(()=>[a(u,{modelValue:e.form.Username,"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.Username=s),placeholder:"\u7528\u6237\u540D"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u767B\u5F55\u5BC6\u7801\uFF1A",prop:"Passwd"},{default:r(()=>[a(u,{modelValue:e.form.Passwd,"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.Passwd=s),placeholder:"\u5BC6\u7801"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var O=v(G,[["render",I]]);const j=w({name:"sshinfo",components:{Table:E,Layer:O},setup(){const e=c(!0),t=c([]),l=C({show:!1,title:"\u65B0\u589E",showButton:!0}),i=()=>{e.value=!0,H().then(o=>{t.value=o.data}).catch(()=>{t.value=[]}).finally(()=>{e.value=!1})},d=()=>{l.title="\u65B0\u589E\u6570\u636E",l.show=!0,delete l.row},m=o=>{l.title="\u7F16\u8F91\u6570\u636E",l.row=o,l.show=!0},u=P(()=>t.value.length===0);return i(),{buttonShow:u,Plus:k,Search:S,Delete:L,tableData:t,loading:e,layer:l,handleAdd:d,handleEdit:m,getTableData:i,formatDate:U}}}),J={class:"layout-container"},z={class:"layout-container-form flex space-between"},K={class:"layout-container-form-handle"},M=b("\u589E\u52A0"),Q={class:"layout-container-table"},R=b("\u66F4\u65B0");function W(e,t,l,i,d,m){const u=n("el-button"),o=n("el-table-column"),F=n("Table"),g=n("Layer"),s=V("loading");return f(),$("div",J,[y("div",z,[y("div",K,[e.buttonShow?(f(),h(u,{key:0,type:"primary",icon:e.Plus,onClick:e.handleAdd},{default:r(()=>[M]),_:1},8,["icon","onClick"])):B("",!0)])]),y("div",Q,[T((f(),h(F,{ref:"table",data:e.tableData,onGetTableData:e.getTableData},{default:r(()=>[a(o,{prop:"Host",label:"\u4E3B\u673A",align:"center"}),a(o,{prop:"Port",label:"\u7AEF\u53E3",align:"center"}),a(o,{prop:"Username",label:"\u8D26\u6237",align:"center"}),a(o,{prop:"Passwd",label:"\u5BC6\u7801",align:"center"}),a(o,{prop:"CreatedAt",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"},{default:r(p=>[b(D(e.formatDate(p.row.CreatedAt)),1)]),_:1}),a(o,{prop:"UpdatedAt",label:"\u66F4\u65B0\u65F6\u95F4",align:"center"},{default:r(p=>[b(D(e.formatDate(p.row.UpdatedAt)),1)]),_:1}),a(o,{label:"\u64CD\u4F5C",align:"center",fixed:"right",width:"200"},{default:r(p=>[a(u,{onClick:X=>e.handleEdit(p.row)},{default:r(()=>[R]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onGetTableData"])),[[s,e.loading]]),e.layer.show?(f(),h(g,{key:0,layer:e.layer,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):B("",!0)])])}var te=v(j,[["render",W]]);export{te as default};
