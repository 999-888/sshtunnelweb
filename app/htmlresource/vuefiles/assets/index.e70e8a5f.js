import{T as w}from"./index.a78fe6e0.js";import{q as y,d as F,L as B,k as c,_,r as u,o as p,x as h,w as n,b as o,j as v,A as E,c as g,a as A,B as C,y as $,f as k}from"./index.4af6ff06.js";function L(){return y({url:"/sshtunnel/workflow/list",method:"get"})}function T(e){return y({url:"/sshtunnel/workflow/update",method:"post",data:e})}const V=F({components:{Layer:B},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},setup(e,a){const l=c(null),i=c(null);let m=c({Username:"",Localport:"",Svcname:"",ID:""});const r={};t();function t(){e.layer.row&&(m.value=JSON.parse(JSON.stringify(e.layer.row)))}return{form:m,rules:r,layerDom:i,ruleForm:l}},methods:{submit(){this.ruleForm&&this.ruleForm.validate(e=>{if(e){let a=this.form;this.layer.row&&this.updateForm(a)}else return!1})},updateForm(e){T(e).then(a=>{this.$message({type:"success",message:"\u6210\u529F"}),this.$emit("getTableData"),this.layerDom&&this.layerDom.close()})}}});function U(e,a,l,i,m,r){const t=u("el-input"),d=u("el-form-item"),f=u("el-form"),b=u("Layer",!0);return p(),h(b,{layer:e.layer,onConfirm:e.submit,ref:"layerDom"},{default:n(()=>[o(f,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:n(()=>[o(d,{label:"\u7533\u8BF7\u4EBA: ",prop:"Username"},{default:n(()=>[o(t,{modelValue:e.form.Username,"onUpdate:modelValue":a[0]||(a[0]=s=>e.form.Username=s),placeholder:"\u7533\u8BF7\u4EBA",disabled:""},null,8,["modelValue"])]),_:1}),o(d,{label:"\u7533\u8BF7\u8BBF\u95EE\u7684\u7AEF\u53E3: ",prop:"Localport"},{default:n(()=>[o(t,{modelValue:e.form.Localport,"onUpdate:modelValue":a[1]||(a[1]=s=>e.form.Localport=s),placeholder:"\u7533\u8BF7\u8BBF\u95EE\u7684\u7AEF\u53E3",disabled:""},null,8,["modelValue"])]),_:1}),o(d,{label:"\u8FDC\u7AEF\u670D\u52A1\u540D\u79F0: ",prop:"Svcname"},{default:n(()=>[o(t,{modelValue:e.form.Svcname,"onUpdate:modelValue":a[2]||(a[2]=s=>e.form.Svcname=s),placeholder:"\u8FDC\u7AEF\u670D\u52A1\u540D\u79F0",disabled:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var S=_(V,[["render",U]]);const N=F({name:"sshtunnelworkflow",components:{Table:w,Layer:S},setup(){const e=c(!0),a=c([]),l=v({show:!1,title:"\u65B0\u589E",showButton:!0}),i=()=>{e.value=!0,L().then(r=>{console.log("workflow",r.data),a.value=r.data}).catch(()=>{a.value=[]}).finally(()=>{e.value=!1})},m=r=>{l.title="\u901A\u8FC7\u5BA1\u6838",l.row=r,l.show=!0};return i(),{tableData:a,loading:e,layer:l,handleEdit:m,getTableData:i}}}),G={class:"layout-container"},O={class:"layout-container-table"},j=k("\u901A\u8FC7");function J(e,a,l,i,m,r){const t=u("el-table-column"),d=u("el-button"),f=u("Table"),b=u("Layer"),s=E("loading");return p(),g("div",G,[A("div",O,[C((p(),h(f,{ref:"table",data:e.tableData,onGetTableData:e.getTableData},{default:n(()=>[o(t,{prop:"Username",label:"\u7533\u8BF7\u4EBA",align:"center"}),o(t,{prop:"Localport",label:"\u7533\u8BF7\u8BBF\u95EE\u7684\u7AEF\u53E3",align:"center"}),o(t,{prop:"Svcname",label:"\u8FDC\u7AEF\u670D\u52A1\u540D\u79F0",align:"center"}),o(t,{label:"\u64CD\u4F5C",align:"center",fixed:"right",width:"200"},{default:n(D=>[o(d,{onClick:W=>e.handleEdit(D.row)},{default:n(()=>[j]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onGetTableData"])),[[s,e.loading]]),e.layer.show?(p(),h(b,{key:0,layer:e.layer,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):$("",!0)])])}var z=_(N,[["render",J]]);export{z as default};
