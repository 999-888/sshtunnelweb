import{T as w}from"./index.3f34d0c0.js";import{u as B,r as E,g as v}from"./workflow.31443f21.js";import{d as b,L as C,k as c,_,r as u,o as f,x as y,w as r,b as o,j as A,A as $,c as T,a as k,B as L,f as F,t as V,y as j}from"./index.79adc836.js";import{f as S}from"./date.df283880.js";const U=b({components:{Layer:C},props:{layer:{type:Object,default:()=>({show:!1,reject:!0,title:"",showButton:!0})}},setup(e,t){const l=c(null),s=c(null);let i=c({Username:"",Localport:"",Svcname:"",ID:""});const d={};a();function a(){e.layer.row&&(i.value=JSON.parse(JSON.stringify(e.layer.row)))}return{form:i,rules:d,layerDom:s,ruleForm:l}},methods:{submit(){this.ruleForm&&this.ruleForm.validate(e=>{if(e){let t=this.form;this.layer.row&&(this.layer.reject?this.rejectForm(t):this.updateForm(t))}else return!1})},updateForm(e){B(e).then(t=>{this.$message({type:"success",message:"\u6210\u529F"}),this.$emit("getTableData"),this.layerDom&&this.layerDom.close()})},rejectForm(e){E(e).then(t=>{this.$message({type:"success",message:"\u6210\u529F"}),this.$emit("getTableData"),this.layerDom&&this.layerDom.close()})}}});function N(e,t,l,s,i,d){const a=u("el-input"),m=u("el-form-item"),h=u("el-form"),D=u("Layer",!0);return f(),y(D,{layer:e.layer,onConfirm:e.submit,ref:"layerDom"},{default:r(()=>[o(h,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:r(()=>[o(m,{label:"\u7533\u8BF7\u4EBA: ",prop:"Username"},{default:r(()=>[o(a,{modelValue:e.form.Username,"onUpdate:modelValue":t[0]||(t[0]=n=>e.form.Username=n),placeholder:"\u7533\u8BF7\u4EBA",disabled:""},null,8,["modelValue"])]),_:1}),o(m,{label:"\u7533\u8BF7\u8BBF\u95EE\u7684\u7AEF\u53E3: ",prop:"Localport"},{default:r(()=>[o(a,{modelValue:e.form.Localport,"onUpdate:modelValue":t[1]||(t[1]=n=>e.form.Localport=n),placeholder:"\u7533\u8BF7\u8BBF\u95EE\u7684\u7AEF\u53E3",disabled:""},null,8,["modelValue"])]),_:1}),o(m,{label:"\u8FDC\u7AEF\u670D\u52A1\u540D\u79F0: ",prop:"Svcname"},{default:r(()=>[o(a,{modelValue:e.form.Svcname,"onUpdate:modelValue":t[2]||(t[2]=n=>e.form.Svcname=n),placeholder:"\u8FDC\u7AEF\u670D\u52A1\u540D\u79F0",disabled:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var G=_(U,[["render",N]]);const O=b({name:"sshtunnelworkflow",components:{Table:w,Layer:G},setup(){const e=c(!0),t=c([]),l=A({show:!1,title:"\u65B0\u589E",showButton:!0,reject:!1}),s=()=>{e.value=!0,v({stats:1}).then(a=>{t.value=a.data}).catch(()=>{t.value=[]}).finally(()=>{e.value=!1})},i=a=>{l.title="\u901A\u8FC7\u5BA1\u6838",l.row=a,l.show=!0},d=a=>{l.title="\u62D2\u7EDD",l.row=a,l.reject=!0,l.show=!0};return s(),{tableData:t,loading:e,layer:l,handleEdit:i,handleReject:d,getTableData:s,formatDate:S}}}),W={class:"layout-container"},J={class:"layout-container-table"},R=F("\u901A\u8FC7"),I=F("\u62D2\u7EDD");function q(e,t,l,s,i,d){const a=u("el-table-column"),m=u("el-button"),h=u("Table"),D=u("Layer"),n=$("loading");return f(),T("div",W,[k("div",J,[L((f(),y(h,{ref:"table",data:e.tableData,onGetTableData:e.getTableData},{default:r(()=>[o(a,{prop:"Username",label:"\u7533\u8BF7\u4EBA",align:"center"}),o(a,{prop:"Localport",label:"\u7533\u8BF7\u8BBF\u95EE\u7684\u7AEF\u53E3",align:"center"}),o(a,{prop:"Svcname",label:"\u8FDC\u7AEF\u670D\u52A1\u540D\u79F0",align:"center"}),o(a,{prop:"CreatedAt",label:"\u7533\u8BF7\u65F6\u95F4",align:"center"},{default:r(p=>[F(V(e.formatDate(p.row.CreatedAt)),1)]),_:1}),o(a,{label:"\u64CD\u4F5C",align:"center",fixed:"right",width:"200"},{default:r(p=>[o(m,{onClick:g=>e.handleEdit(p.row)},{default:r(()=>[R]),_:2},1032,["onClick"]),o(m,{onClick:g=>e.handleReject(p.row)},{default:r(()=>[I]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onGetTableData"])),[[n,e.loading]]),e.layer.show?(f(),y(D,{key:0,layer:e.layer,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):j("",!0)])])}var P=_(O,[["render",q]]);export{P as default};
