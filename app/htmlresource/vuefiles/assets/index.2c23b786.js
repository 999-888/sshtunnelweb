import{T as D}from"./index.a78fe6e0.js";import{a as v,u as E,g as P}from"./sshinfo.ef9f3478.js";import{d as F,L as C,k as f,_,r as n,o as p,x as c,w as u,b as a,j as V,v as $,A as T,c as A,a as y,y as g,B as k,f as B}from"./index.4af6ff06.js";import{P as U,S,D as L}from"./Search.baaf2765.js";const H=F({components:{Layer:C},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},setup(e,t){const l=f(null),i=f(null);let d=f({Host:"",Port:"",Username:"",Passwd:"",ID:""});const m={Host:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E3B\u673AIP",trigger:"blur"}],Port:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E3B\u673Aport",trigger:"blur"}],Username:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u6237",trigger:"blur"}],Passwd:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801",trigger:"blur"}]};r();function r(){e.layer.row&&(d.value=JSON.parse(JSON.stringify(e.layer.row)))}return{form:d,rules:m,layerDom:i,ruleForm:l}},methods:{submit(){this.ruleForm&&this.ruleForm.validate(e=>{if(e){let t=this.form;this.layer.row?this.updateForm(t):this.addForm(t)}else return!1})},addForm(e){v(e).then(t=>{this.$message({type:"success",message:"\u65B0\u589E\u6210\u529F"}),this.$emit("getTableData",!0),this.layerDom&&this.layerDom.close()})},updateForm(e){E(e).then(t=>{this.$message({type:"success",message:"\u7F16\u8F91\u6210\u529F"}),this.$emit("getTableData"),this.layerDom&&this.layerDom.close()})}}});function N(e,t,l,i,d,m){const r=n("el-input"),o=n("el-form-item"),h=n("el-form"),b=n("Layer",!0);return p(),c(b,{layer:e.layer,onConfirm:e.submit,ref:"layerDom"},{default:u(()=>[a(h,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:u(()=>[a(o,{label:"\u4E3B\u673AIP: ",prop:"Host"},{default:u(()=>[a(r,{modelValue:e.form.Host,"onUpdate:modelValue":t[0]||(t[0]=s=>e.form.Host=s),placeholder:"\u8BF7\u8F93\u5165IP"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u4E3B\u673Aport: ",prop:"Port"},{default:u(()=>[a(r,{modelValue:e.form.Port,"onUpdate:modelValue":t[1]||(t[1]=s=>e.form.Port=s),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u7AEF\u53E3"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u767B\u5F55\u8D26\u6237\uFF1A",prop:"Username"},{default:u(()=>[a(r,{modelValue:e.form.Username,"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.Username=s),placeholder:"\u7528\u6237\u540D"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u767B\u5F55\u5BC6\u7801\uFF1A",prop:"Passwd"},{default:u(()=>[a(r,{modelValue:e.form.Passwd,"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.Passwd=s),placeholder:"\u5BC6\u7801"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var q=_(H,[["render",N]]);const G=F({name:"sshinfo",components:{Table:D,Layer:q},setup(){const e=f(!0),t=f([]),l=V({show:!1,title:"\u65B0\u589E",showButton:!0}),i=()=>{e.value=!0,P().then(o=>{t.value=o.data}).catch(()=>{t.value=[]}).finally(()=>{e.value=!1})},d=()=>{l.title="\u65B0\u589E\u6570\u636E",l.show=!0,delete l.row},m=o=>{l.title="\u7F16\u8F91\u6570\u636E",l.row=o,l.show=!0},r=$(()=>t.value.length===0);return i(),{buttonShow:r,Plus:U,Search:S,Delete:L,tableData:t,loading:e,layer:l,handleAdd:d,handleEdit:m,getTableData:i}}}),I={class:"layout-container"},O={class:"layout-container-form flex space-between"},j={class:"layout-container-form-handle"},J=B("\u589E\u52A0"),z={class:"layout-container-table"},K=B("\u66F4\u65B0");function M(e,t,l,i,d,m){const r=n("el-button"),o=n("el-table-column"),h=n("Table"),b=n("Layer"),s=T("loading");return p(),A("div",I,[y("div",O,[y("div",j,[e.buttonShow?(p(),c(r,{key:0,type:"primary",icon:e.Plus,onClick:e.handleAdd},{default:u(()=>[J]),_:1},8,["icon","onClick"])):g("",!0)])]),y("div",z,[k((p(),c(h,{ref:"table",data:e.tableData,onGetTableData:e.getTableData},{default:u(()=>[a(o,{prop:"Host",label:"\u4E3B\u673A",align:"center"}),a(o,{prop:"Port",label:"\u7AEF\u53E3",align:"center"}),a(o,{prop:"Username",label:"\u8D26\u6237",align:"center"}),a(o,{prop:"Passwd",label:"\u5BC6\u7801",align:"center"}),a(o,{label:"\u64CD\u4F5C",align:"center",fixed:"right",width:"200"},{default:u(w=>[a(r,{onClick:Q=>e.handleEdit(w.row)},{default:u(()=>[K]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onGetTableData"])),[[s,e.loading]]),e.layer.show?(p(),c(b,{key:0,layer:e.layer,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):g("",!0)])])}var Z=_(G,[["render",M]]);export{Z as default};
