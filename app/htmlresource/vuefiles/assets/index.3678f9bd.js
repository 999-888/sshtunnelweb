import{T as v}from"./index.6f5dada4.js";import{a as w,u as C,b as A}from"./remote.a2c9b65a.js";import{d as _,L as E,k as c,_ as F,r,o as p,x as y,w as u,b as l,j as $,A as T,c as B,a as D,B as S,y as V,f as b}from"./index.f1bf0a60.js";import{P as k,S as R,D as L}from"./Search.5ebb13bd.js";const N=_({components:{Layer:E},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},setup(e,t){const a=c(null),s=c(null);let n=c({Remote:"",Svcname:"",ID:""});const m={Remote:[{required:!0,message:"\u8FDC\u7AEF\u670D\u52A1\u5730\u5740",trigger:"blur"}],Svcname:[{required:!0,message:"\u8FDC\u7AEF\u670D\u52A1\u540D\u79F0",trigger:"blur"}]};o();function o(){e.layer.row&&(n.value=JSON.parse(JSON.stringify(e.layer.row)))}return{form:n,rules:m,layerDom:s,ruleForm:a}},methods:{submit(){this.ruleForm&&this.ruleForm.validate(e=>{if(e){let t=this.form;this.layer.row?this.updateForm(t):this.addForm(t)}else return!1})},addForm(e){w(e).then(t=>{this.$message({type:"success",message:"\u65B0\u589E\u6210\u529F"}),this.$emit("getTableData",!0),this.layerDom&&this.layerDom.close()})},updateForm(e){C(e).then(t=>{this.$message({type:"success",message:"\u7F16\u8F91\u6210\u529F"}),this.$emit("getTableData"),this.layerDom&&this.layerDom.close()})}}});function G(e,t,a,s,n,m){const o=r("el-input"),i=r("el-form-item"),f=r("el-form"),h=r("Layer",!0);return p(),y(h,{layer:e.layer,onConfirm:e.submit,ref:"layerDom"},{default:u(()=>[l(f,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:u(()=>[l(i,{label:"\u8FDC\u7AEF\u670D\u52A1\u5730\u5740: ",prop:"Remote"},{default:u(()=>[l(o,{modelValue:e.form.Remote,"onUpdate:modelValue":t[0]||(t[0]=d=>e.form.Remote=d),placeholder:"\u8BF7\u8F93\u5165\u8FDC\u7AEF\u5730\u5740"},null,8,["modelValue"])]),_:1}),l(i,{label:"\u8FDC\u7AEF\u670D\u52A1\u540D\u79F0: ",prop:"Svcname"},{default:u(()=>[l(o,{modelValue:e.form.Svcname,"onUpdate:modelValue":t[1]||(t[1]=d=>e.form.Svcname=d),placeholder:"\u670D\u52A1\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var O=F(N,[["render",G]]);const P=_({name:"remotesvc",components:{Table:v,Layer:O},setup(){const e=c(!0),t=c([]),a=$({show:!1,title:"\u65B0\u589E",showButton:!0}),s=()=>{e.value=!0,A().then(o=>{t.value=o.data}).catch(()=>{t.value=[]}).finally(()=>{e.value=!1})},n=()=>{a.title="\u65B0\u589E\u6570\u636E",a.show=!0,delete a.row},m=o=>{a.title="\u7F16\u8F91\u6570\u636E",a.row=o,a.show=!0};return s(),{Plus:k,Search:R,Delete:L,tableData:t,loading:e,layer:a,handleAdd:n,handleEdit:m,getTableData:s}}}),j={class:"layout-container"},q={class:"layout-container-form flex space-between"},J={class:"layout-container-form-handle"},U=b("\u589E\u52A0"),I={class:"layout-container-table"},z=b("\u66F4\u65B0");function H(e,t,a,s,n,m){const o=r("el-button"),i=r("el-table-column"),f=r("Table"),h=r("Layer"),d=T("loading");return p(),B("div",j,[D("div",q,[D("div",J,[l(o,{type:"primary",icon:e.Plus,onClick:e.handleAdd},{default:u(()=>[U]),_:1},8,["icon","onClick"])])]),D("div",I,[S((p(),y(f,{ref:"table",data:e.tableData,onGetTableData:e.getTableData},{default:u(()=>[l(i,{prop:"Remote",label:"\u8FDC\u7AEF\u670D\u52A1\u5730\u5740",align:"center"}),l(i,{prop:"Svcname",label:"\u8FDC\u7AEF\u670D\u52A1\u540D\u79F0",align:"center"}),l(i,{label:"\u64CD\u4F5C",align:"center",fixed:"right",width:"200"},{default:u(g=>[l(o,{onClick:K=>e.handleEdit(g.row)},{default:u(()=>[z]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onGetTableData"])),[[d,e.loading]]),e.layer.show?(p(),y(h,{key:0,layer:e.layer,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):V("",!0)])])}var Y=F(P,[["render",H]]);export{Y as default};
